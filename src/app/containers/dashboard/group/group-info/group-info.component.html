<div class="row">
  <div class="col-4">
    <img *ngIf="groupImg" style="width: 100%" [src]="(groupImg | safeHtml)">
  </div>
  <div class="col-8">
    <div class="d-flex justify-content-between" style="margin-bottom: 15px">
      <span style="color: #26abe3; font-weight:700">
        群組資訊
      </span>
      <div>
        <!-- <button class="alatech-btn alatech-btn--default" title="返回" [routerLink]="['/dashboard/my-group-list']">
          管理
        </button> -->
        <button class="alatech-btn alatech-btn--default"
          title="申請加入"
          *ngIf="joinStatus === 0"
          (click)="handleActionGroup(1)"
        >
          申請加入
        </button>
        <button class="alatech-btn alatech-btn--default group-btn--waiting"
          title="取消申請"
          *ngIf="joinStatus === 1"
          (click)="handleActionGroup(2)"
        >
          取消申請
        </button>
        <button class="alatech-btn alatech-btn--default"
          title="退出群組"
          *ngIf="joinStatus === 2"
          (click)="handleActionGroup(2)"
        >
          退出群組
        </button>
        <button class="alatech-btn alatech-btn--default"
          title="管理"
          *ngIf="joinStatus === 2"
          (click)="goEditPage()"
        >
          管理
        </button>
        <!-- <button class="alatech-btn alatech-btn--default"
          title="管理"
          *ngIf="joinStatus === 2 && accessRight === 30"
        >
          管理
        </button> -->
      </div>
    </div>
    <div style="margin-bottom: 30px;">
      <div>
        <label>{{ groupInfo?.groupName }}</label>
      </div>
      <div>
        <label>群組ID：</label>{{ group_id }}
      </div>
      <div>
        <label>階層：</label>{{ this.groupLevel }}
      </div>
      <div>
        <label>狀態：</label>{{ groupInfo?.groupStatus | groupStatus }}
      </div>
      <div>
        <label>介紹：</label>{{ groupInfo?.groupDesc }}
      </div>
    </div>
    <div>
      <mat-tab-group (selectChange)="changeGroupInfo($event)" class="ala-tab-group">
        <mat-tab label="子群組資訊">
          <label style="color: #26abe3; font-weight: 700;margin-bottom: 15px">品牌</label>
          <div style="margin-bottom: 15px">
            <ng-container  *ngFor="let subBrandItem of subBrandInfo">
              <app-member-capsule
                [role]="role"
                [title]="subBrandItem?.groupName"
                [memberInfo]="subBrandItem"
                [name]="subBrandItem && subBrandItem?.groupName"
                [icon]="subBrandItem?.groupIcon"
              >
              </app-member-capsule>
            </ng-container>
          </div>

          <label style="color: #26abe3; font-weight: 700;margin-bottom: 15px">分店</label>
          <div style="margin-bottom: 15px">
            <ng-container  *ngFor="let subBranchItem of subBranchInfo">
              <app-member-capsule
                [role]="role"
                [isSubGroupInfo]="role?.isSupervisor || role?.isSystemDeveloper || role?.isSystemMaintainer || role?.isBrandAdministrator"
                [title]="subBranchItem?.groupName"
                [memberInfo]="subBranchItem"
                [name]="subBranchItem && subBranchItem?.groupName"
                [icon]="subBranchItem?.groupIcon"
              >
              </app-member-capsule>
            </ng-container>
          </div>

          <label style="color: #26abe3; font-weight: 700;margin-bottom: 15px">教練課</label>
          <div style="margin-bottom: 15px" >
            <ng-container  *ngFor="let subCoachItem of subCoachInfo">
              <app-member-capsule
                [role]="role"
                [isSubGroupInfo]="role?.isSupervisor || role?.isSystemDeveloper || role?.isSystemMaintainer || role?.isBrandAdministrator || role?.isBranchAdministrator"
                [title]="subCoachItem?.groupName"
                [memberInfo]="subCoachItem"
                [name]="subCoachItem && subCoachItem?.groupName"
                [icon]="subCoachItem?.groupIcon"
              >
              </app-member-capsule>
            </ng-container>
          </div>
        </mat-tab>
        <mat-tab label="管理員資訊">
          <label style="color: #26abe3; font-weight: 700;margin-bottom: 15px">品牌管理員</label>
          <div style="margin-bottom: 15px">
            <ng-container  *ngFor="let brandAdmItem of brandAdministrators">
              <app-member-capsule
                [role]="role"
                [isAdminInfo]="role?.isSupervisor || role?.isSystemDeveloper || role?.isSystemMaintainer"
                [title]="brandAdmItem?.memberName"
                [memberInfo]="brandAdmItem"
                [name]="brandAdmItem && brandAdmItem?.memberName"
                [icon]="brandAdmItem?.memberIcon"
              >
              </app-member-capsule>
            </ng-container>
          </div>

          <label style="color: #26abe3; font-weight: 700;margin-bottom: 15px">分店管理員</label>
          <div style="margin-bottom: 15px">
            <ng-container  *ngFor="let branchAdmItem of branchAdministrators">
              <app-member-capsule
                [role]="role"
                [isAdminInfo]="role?.isSupervisor || role?.isSystemDeveloper || role?.isSystemMaintainer || role?.isBrandAdministrator"
                [title]="branchAdmItem?.memberName"
                [memberInfo]="branchAdmItem"
                [name]="branchAdmItem && branchAdmItem?.memberName"
                [icon]="branchAdmItem?.memberIcon"
              >
              </app-member-capsule>
            </ng-container>
          </div>

          <label style="color: #26abe3; font-weight: 700;margin-bottom: 15px">教練課管理員</label>
          <div style="margin-bottom: 15px" >
            <ng-container  *ngFor="let coachAdmItem of coachAdministrators">
              <app-member-capsule
                [role]="role"
                [isAdminInfo]="role?.isSupervisor || role?.isSystemDeveloper || role?.isSystemMaintainer || role?.isBrandAdministrator || role?.isBranchAdministrator"
                [title]="coachAdmItem?.memberName"
                [memberInfo]="coachAdmItem"
                [name]="coachAdmItem && coachAdmItem?.memberName"
                [icon]="coachAdmItem?.memberIcon"
              >
              </app-member-capsule>
            </ng-container>
          </div>
        </mat-tab>
        <mat-tab label="一般成員資訊">
          <ng-container  *ngFor="let item of groupInfos">
            <div style="margin-bottom: 15px">
              <app-member-capsule
                [role]="role"
                [isAdminInfo]="true"
                [title]="item?.memberName"
                [memberInfo]="item"
                [name]="item && item?.memberName"
                [icon]="item?.memberIcon"
              >
              </app-member-capsule>
            </div>
          </ng-container>
        </mat-tab>
        <mat-tab label="待加入成員">
          <ng-container  *ngFor="let item of groupInfos">
            <div style="margin-bottom: 15px">
              <app-member-capsule
                [role]="role"
                [isAdminInfo]="true"
                [title]="item?.memberName"
                [memberInfo]="item"
                [name]="item && item?.memberName"
                [icon]="item?.memberIcon"
              >
              </app-member-capsule>
            </div>
          </ng-container>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>
</div>
