<app-navbar></app-navbar>
<div class="main">
  <div class="collapse navbar-collapse search-form" id="navbarResponsive" [class.show]="isCollapseOpen">
    <form (ngSubmit)="onSubmit(rankForm, $event)" #rankForm="ngForm">
      <div class="form-group">
        <label style="color: #008bcd">Map</label>
        <select  *ngIf="tabIdx === 1 || tabIdx === 0" name="mapId" [(ngModel)]="mapId" class="form-field mr-2" (click)="selectMap(mapId)"style="width: 100%">
          <option *ngFor="let _map of mapDatas" [value]="_map.map_id">{{ _map.map_name }}</option>
        </select>
        <select *ngIf="tabIdx === 2 || tabIdx === 3 || tabIdx === 4 || tabIdx === 5" name="mapId" [(ngModel)]="mapId" class="form-field mr-2" (click)="selectMap(mapId)" style="width: 100%">
          <option *ngFor="let _map of mapDatas" [value]="_map.map_id">{{ _map.map_name | mapTranslate }}</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label searchbar-menu--text__rwd"
          (click)="switchSearchItem('email')"
          [ngClass]="{'active': isEmailSearch}"
        >
          Email
        </label>
        <label class="form-label searchbar-menu--text__rwd"
          (click)="switchSearchItem('phone')"
          [ngClass]="{'active': !isEmailSearch }"
        >
          Phone
        </label>
        <ng-container *ngIf="isEmailSearch">
          <div class="dropdown" (click)="openActive($event)">
            <div class="clearable">
              <input type="email" name="email" [(ngModel)]="email" (keyup)="inputEvent($event)" autocomplete="off" [class.loading]="isSelectLoading"
                class="form-field" placeholder="enter email" (focus)="focusEvent($event)" style="width: 100%;text-overflow: ellipsis;">
              <i class="clearable__clear" [class.show]="isClearIconShow" (click)="clear()">&times;</i>
              <i class="fa fa-caret-down async-caret"></i>
              <i class="fa fa-spinner fa-pulse fa-1x fa-fw spinner" [class.spinner-hidden]="!isSelectLoading"></i>
            </div>
            <ul class="dropdown-menu" style="width: 100%;" *ngIf="emailOptions && emailOptions.length > 0" [class.show]="active && emailOptions.length > 0">
              <li *ngFor="let o of emailOptions; let i = index" (click)="remove(i, $event)">
                <a>
                  {{ o }}
                </a>
              </li>
            </ul>
          </div>
        </ng-container>
        <ng-container *ngIf="!isEmailSearch">
          <div class="dropdown" (click)="openActive($event)">
            <div class="clearable">
              <input type="phone" name="phone" [(ngModel)]="phone" (keyup)="inputEvent($event)" autocomplete="off" [class.loading]="isSelectLoading"
                class="form-field" placeholder="enter phone number" (focus)="focusEvent($event)" style="width: 100%;text-overflow: ellipsis;">
              <i class="clearable__clear" [class.show]="isClearIconShow" (click)="clear()">&times;</i>
              <i class="fa fa-caret-down async-caret"></i>
              <i class="fa fa-spinner fa-pulse fa-1x fa-fw spinner" [class.spinner-hidden]="!isSelectLoading"></i>
            </div>
            <ul class="dropdown-menu" style="width: 100%;" *ngIf="phoneOptions && phoneOptions.length > 0" [class.show]="active && phoneOptions.length > 0">
              <li *ngFor="let phone of phoneOptions; let i = index" (click)="remove(i, $event)">
                <a>
                  {{ phone?.displayPhone }}
                </a>
              </li>
            </ul>
          </div>
        </ng-container>
      </div>
      <div class="form-group"  *ngIf="!isEventTab">
        <label style="color: #008bcd">Date</label>
        <div>
          <my-date-picker name="selectedStartDate"
            class="date-picker"
            [options]="startDateOptions"
            [(ngModel)]="startDay"
            required
          >
          </my-date-picker>
          <div style="margin: 0px 5px;display: inline-block;vertical-align: text-bottom;">~</div>

          <my-date-picker name="selectedEndDate"
            class="date-picker"
            [options]="endDateOptions"
            [(ngModel)]="finalDay"
            required
          >
          </my-date-picker>
        </div>

      </div>
      <div class="form-group">
        <label style="color: #008bcd">Group</label>
        <select name="groupId" [(ngModel)]="groupId" class="form-field mr-2" style="width: 100%">
          <option [value]="2">No grouping</option>
          <option [value]="0">Male</option>
          <option [value]="1">Female</option>
        </select>
      </div>
      <button type="submit" class="button search-form__button" style="width: 100%">
        search
      </button>
    </form>
  </div>
  <div class="mask" [class.mask--show]="isMaskShow" (click)="touchMask()"></div>
  <router-outlet></router-outlet>
</div>
