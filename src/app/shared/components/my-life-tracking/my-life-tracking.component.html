<div class="flexCol">
  <span style="color: #157fcc; font-weight:700; font-size: 20px;" *ngIf="!isPreviewMode">
    {{'universal_lifeTracking_lifeTracking' | translate}} {{'universal_activityData_report' | translate}}
  </span>
  <app-report-filter class="card__section" *ngIf="!isPreviewMode"></app-report-filter>
  <section class="card__section">
    <div style="background-color: white;">
      <ng-container *ngIf="isLoading" style="display:flex;justify-content: center;align-items: center; width:100%;">
        <mat-spinner style="z-index: 3; margin-top: 30px; position: absolute; left: 50%;"></mat-spinner>
        <div class="whiteMask">
        </div>
      </ng-container>
      <ng-container *ngIf="nodata && !isLoading" style="width: 100%; display: flex; flex-direction: row; justify-content: center;">
        <p style="margin-top: 10px; color: gray; font-size: 18px;">{{'universal_status_noData' | translate}}</p>
      </ng-container>
      <ng-container *ngIf="!isLoading && !nodata && showReport" style="width: 100%; min-height: 100%; padding-bottom: 30px;">
        <div class="functionButton">
          <button class="alatech-btn alatech-btn--default activity-btn"
            title="{{'universal_operating_print' | translate}}"
            (click)="print()"
            *ngIf="isPreviewMode"
          >
            {{'universal_operating_print' | translate}}
          </button>
          <a target="_blank"
            [href]="previewUrl"
            class="alatech-btn--default"
            *ngIf="!isPreviewMode"
          >
            <i class="icon-svg_web-icon_p2_087-print activity-info_icon_size"></i>
          </a>
        </div>
        <div [class.fitWindow]="!isPreviewMode">
          <div class="flexRow reportHeader" [class.media-1000-col]="!isPreviewMode">
            <div class="flexRow">
              <div class="activity-icon">
                <i class="icon-svg_web-icon_p3_016-life_tracking"></i>
              </div>
              <div class="flexCol" style="margin-left: 20px;">
                <span class="reportDateTime">
                  {{'universal_group_buildFromTime' | translate: {'date': reportEndDate, 'range': period} }}
                </span>
                <span class="reportTitle">
                  {{'universal_lifeTracking_lifeTracking' | translate}} {{'universal_activityData_report' | translate}}
                </span>
              </div>
            </div>
            <div class="flexRow authorInfo">
              <span class="reportTitle" style="margin: 10px 10px 0px 0px;">{{fileInfo?.nickname}}</span>
              <div style="margin-right: 10px;">
                <img style="width: 55px; border-radius: 50%;" src="{{fileInfo?.avatarUrl}}">
              </div>
            </div>
          </div>
        </div>
        <div class="flexCol">
          <div class="activity-title flexRow" style="justify-content: space-between;">
            <span class="ala-dashboard-title">{{'universal_activityData_summary' | translate}}</span>
            <span class="reportDateTime" style="text-align: end;">
              {{'universal_activityData_creatTime' | translate}} {{reportCreatedTime}}
            </span>
          </div>
          <div>
            <div class="summaryArea">
              <div class="summaryDataArea">
                <span class="summaryData">{{infoData.validStroke || 0}}</span>
                <p class="summaryDescription">{{'universal_activityData_numberOfValidPens' | translate}}</p>
              </div>
              <div class="summarySepData">
                <div class="sepLine"></div>
                <div class="summaryDataArea">
                  <span class="summaryData">{{infoData.height || 0 | number:'1.0-1'}}</span>
                  <p class="summaryDescription">
                    {{'universal_userProfile_bodyHeight' | translate}}
                  </p>
                </div>
              </div>
              <div class="summarySepData">
                <div class="sepLine"></div>
                <div class="summaryDataArea">
                  <span class="summaryData">{{infoData.weight || 0 | number:'1.0-1'}}</span>
                  <p class="summaryDescription">
                    {{'universal_userProfile_bodyWeight' | translate}}
                  </p>
                </div>
              </div>
              <div class="summarySepData">
                <div class="sepLine"></div>
                <div class="summaryDataArea">
                  <span class="summaryData">{{infoData.age || 0 | number:'1.0-0'}}</span>
                  <p class="summaryDescription">
                    {{'universal_userProfile_age' | translate}}
                  </p>
                </div>
              </div>
              <div class="summarySepData">
                <div class="sepLine"></div>
                <div class="summaryDataArea">
                  <span class="summaryData" *ngIf="infoData.gender === 0">Male</span>
                  <span class="summaryData" *ngIf="infoData.gender === 1">Female</span>
                  <p class="summaryDescription">
                    {{'universal_userProfile_gender' | translate}}
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="flexCol">
          <div class="activity-title flexRow">
            <span class="ala-dashboard-title">
              {{ 'universal_group_dailyLifeRecord' | translate: {'range': rangeTranslate} }}
            </span>
          </div>
          <div class="flexRow durationSection">
            <div class="flexCol durationInfo rwd_wid_100per">
              <span class="reportChartTitle">{{'universal_userProfile_StepCount' | translate}}</span>
              <div class="flexRow infoHeader">
                <div class="flexCol">
                  <span class="summaryData" *ngIf="recordData.avgStep / 100000 >= 1">
                    {{recordData.avgStep / 1000 | number: '1.0-1'}}k
                  </span>
                  <span class="summaryData" *ngIf="recordData.avgStep / 100000 < 1">
                    {{recordData.avgStep | number: '1.0-0'}}
                  </span>
                  <span>{{'universal_deviceSetting_avgSteps' | translate}}</span>
                </div>
                <div class="flexCol" style="margin-left: 10px;">
                  <span class="summaryData">{{recordData.avgDistance / 1000 | number: '1.0-1'}}</span>
                  <span>{{'universal_adjective_avg' | translate}} {{'universal_activityData_distance' | translate}}km</span>
                </div>
                <div class="flexCol">
                  <span class="summaryData">{{recordData.stepReachReps}}</span>
                  <span>{{'universal_activityData_complianceTimes' | translate}}</span>
                </div>
              </div>
              <span class="areaDescription dataDiscription">
                {{'universal_activityData_stepReportDescription' | translate}}
              </span>
            </div>
            <div class="durationChart rwd_wid_100per">
              <span class="noChartData" *ngIf="noStepData">{{'universal_status_noData' | translate}}</span>
              <app-discolor-column-chart
                [data]="stepData"
                [dateRange]="dataDateRange"
                [chartName]="'Step'"
                [searchDate]="searchDate"
                [chartHeight]="170"
                *ngIf="!noStepData"
              ></app-discolor-column-chart>
            </div>
          </div>
          <div class="flexRow  durationSection">
            <div class="flexCol durationInfo rwd_wid_100per">
              <span class="reportChartTitle">{{'universal_activityData_hr' | translate}}</span>
              <div class="flexRow infoHeader">
                <div class="flexCol">
                  <span class="summaryData">{{recordData.avgMaxHR | number: '1.0-1'}}</span>
                  <span>{{'universal_adjective_avg' | translate}} {{'universal_userProfile_maxHr' | translate}}</span>
                </div>
                <div class="flexCol">
                  <span class="summaryData">{{recordData.avgRestHR | number: '1.0-1'}}</span>
                  <span>{{'universal_adjective_avg' | translate}} {{'universal_userProfile_restHr' | translate}}</span>
                </div>
              </div>
              <span class="areaDescription dataDiscription">
                {{'universal_activityData_hrReportDescription' | translate}}
              </span>
            </div>
            <div class="durationChart rwd_wid_100per">
              <span class="noChartData" *ngIf="noHRData">{{'universal_status_noData' | translate}}</span>
              <app-compare-line-chart
                [data]="HRData"
                [dateRange]="dataDateRange"
                [chartName]="'LifeHR'"
                [searchDate]="searchDate"
                [chartHeight]="170"
                *ngIf="!noHRData"
              >
              </app-compare-line-chart>
            </div>
          </div>
          <div class="flexRow  durationSection" style="width: 100%;">
            <div class="flexCol durationInfo rwd_wid_100per">
              <span class="reportChartTitle">{{'universal_lifeTracking_sleep' | translate}}</span>
              <div class="flexRow infoHeader">
                <div class="flexCol">
                  <span class="summaryData">{{recordData.avgSleepTime || '0:00'}}</span>
                  <span>{{'universal_adjective_avg' | translate}} {{'universal_lifeTracking_sleep' | translate}}</span>
                </div>
                <div class="flexCol" style="margin-left: 10px;">
                  <span class="summaryData">{{recordData.avgDeepSleepTime || '0:00'}}</span>
                  <span>{{'universal_adjective_avg' | translate}} {{'universal_lifeTracking_deepSleep' | translate}}</span>
                </div>
                <div class="flexCol">
                  <span class="summaryData">{{recordData.avgLightSleepTime || '0:00'}}</span>
                  <span>{{'universal_adjective_avg' | translate}} {{'universal_lifeTracking_lightSleep' | translate}}</span>
                </div>
              </div>
              <span class="areaDescription dataDiscription">
                {{'universal_activityData_sleepReportInstructions' | translate}}
              </span>
            </div>
            <div class="durationChart rwd_wid_100per">
              <span class="noChartData" *ngIf="noSleepData">{{'universal_status_noData' | translate}}</span>
              <app-stack-column-chart
                [data]="sleepData"
                [dateRange]="dataDateRange"
                [chartName]="'Sleep'"
                [searchDate]="searchDate"
                *ngIf="!noSleepData"
              >
              </app-stack-column-chart>
            </div>
          </div>
        </div>
        <div class="flexCol" style="margin-top: 10px;">
          <div class="activity-title">
            <span class="ala-dashboard-title">
              {{'universal_activityData_recentFitness' | translate}}
            </span>
          </div>
          <div class="flexRow recentBodyQuality" style="margin-top: 20px;">
            <div class="flexCol postureInfo rwd_wid_100per">
              <div class="flexRow media-569-col">
                <app-body-constitute-svg
                  class="myBodySvg"
                  [fatRate]="infoData.fatRate"
                  [muscleRate]="infoData.muscleRate"
                  [bodyWeight]="infoData.weight"
                  [FFMI]="infoData.FFMI"
                  [gender]="infoData.gender"
                >
                </app-body-constitute-svg>
                <div class="myBodyInfo">
                  <table>
                    <div>
                      <td class="tableCol constituteTd" style="padding-right: 5px;">
                        <tr>
                          <span class="dataAnnotation">{{'universal_userProfile_bodyWeight' | translate}}</span><br/>
                          <span class="summaryData">{{infoData.weight | number: '1.0-1'}}Kg</span>
                        </tr>
                        <tr>
                          <span style="color: #ffba4e;">●</span>
                          <span class="dataAnnotation">{{'universal_lifeTracking_fatRate' | translate}}</span><br/>
                          <span class="summaryData">{{infoData.fatRate | number: '1.0-1'}}%</span>
                        </tr>
                        <tr>
                          <span style="color: #31e4d9;">●</span>
                          <span class="dataAnnotation">{{'universal_userProfile_muscleRate' | translate}}</span><br/>
                          <span class="summaryData">{{infoData.muscleRate | number: '1.0-1'}}%</span>
                        </tr>
                        <tr>
                          <span class="dataAnnotation">FFMI</span><br/>
                          <span class="summaryData">{{infoData.FFMI | number: '1.0-1'}}</span>
                        </tr>
                      </td>
                      <td class="tableCol" style="text-align: start;">
                        <tr><br/><br/></tr>
                        <tr>
                          <br/>
                          <div class="commentText" [style.background-color]="infoData.fatRateColor">{{infoData.fatRateComment}}</div>
                        </tr>
                        <tr>
                          <br/>
                          <div class="commentText" [style.background-color]="infoData.muscleRateColor">{{infoData.muscleRateComment}}</div>
                        </tr>
                      </td>
                    </div>
                    <td class="tableCol constituteTd" style="padding: 0 5px 0 20px;">
                      <tr>
                        <span class="dataAnnotation">{{'universal_lifeTracking_skeletonRate' | translate}}</span><br/>
                        <span class="summaryData">{{infoData.skeletonRate | number: '1.0-1'}}%</span>
                      </tr>
                      <tr>
                        <span class="dataAnnotation">{{'universal_lifeTracking_moistureRate' | translate}}</span><br/>
                        <span class="summaryData">{{infoData.moistureRate | number: '1.0-1'}}%</span>
                      </tr>
                      <tr>
                        <span class="dataAnnotation">{{'universal_lifeTracking_proteinRate' | translate}}</span><br/>
                        <span class="summaryData">{{infoData.proteinRate | number: '1.0-1'}}%</span>
                      </tr>
                      <tr>
                        <span class="dataAnnotation">{{'universal_activityData_basalMetabolism' | translate}}</span><br/>
                        <span class="summaryData">{{infoData.basalMetabolicRate | number: '1.0-1'}}</span>
                      </tr>
                    </td>
                    <td class="tableCol" style="text-align: start;">
                      <tr><br/><br/></tr>
                      <tr>
                        <br/>
                        <div class="commentText" [style.background-color]="infoData.moistureRateColor">{{infoData.moistureRateComment}}</div>
                      </tr>
                    </td>
                  </table>
                </div>
              </div>
              <!---
              <span class="dataAnnotation" style="margin-top: 10px;">
                <i class="icon-svg_web-icon_p3_001-bathroom_scale" style="font-size: 22px;"></i>
                {{'universal_operating_update' | translate}} {{'universal_activityData_time' | translate}}
              </span>
              --->
            </div>
            <div class="flexCol postureTrend rwd_wid_100per">
              <div>
                <span class="reportChartTitle">{{'universal_adjective_avg' | translate}} {{'universal_activityData_weightTrend' | translate}}</span>
                <app-line-chart
                  [data]="weightData"
                  [dateRange]="dataDateRange"
                  [dateList]="chartTimeStamp"
                  [chartName]="'Weight'"
                  [searchDate]="searchDate"
                  [chartHeight]="120"
                ></app-line-chart>
              </div>
              <div class="flexCol">
                <span class="reportChartTitle">{{'universal_adjective_avg' | translate}} {{'universal_activityData_bodyFatTrend' | translate}}</span>
                <span class="noChartData" *ngIf="noConstituteData">{{'universal_status_noData' | translate}}</span>
                <app-line-chart
                  [data]="constituteData"
                  [dateRange]="dataDateRange"
                  [dateList]="chartTimeStamp"
                  [chartName]="'FatRate'"
                  [searchDate]="searchDate"
                  [chartHeight]="120"
                  *ngIf="!noConstituteData"
                >
                </app-line-chart>
              </div>
              <div class="flexCol">
                <span class="reportChartTitle">{{'universal_adjective_avg' | translate}} {{'universal_activityData_muscleRateTrend' | translate}}</span>
                <span class="noChartData" *ngIf="noConstituteData">{{'universal_status_noData' | translate}}</span>
                <app-line-chart
                  [data]="constituteData"
                  [dateRange]="dataDateRange"
                  [dateList]="chartTimeStamp"
                  [chartName]="'MuscleRate'"
                  [searchDate]="searchDate"
                  [chartHeight]="120"
                  *ngIf="!noConstituteData"
                >
                </app-line-chart>
              </div>
            </div>
          </div>
        </div>
        <div class="flexCol" style="margin-top: 10px;">
          <div class="activity-title">
            <span class="ala-dashboard-title">
              {{'universal_activityData_trend' | translate}}
            </span>
          </div>
          <div class="flexCol">
            <div class="flexRow" style="align-items: center; margin-top: 10px;">
              <span class="reportChartTitle">{{'universal_userProfile_fitTime' | translate}}</span>
              <div class="separateLine"></div>
            </div>
            <div class="flexRow fitTimeChart" [class.media-1000-dataContent]="!isPreviewMode">
              <div class="flexRow dataNumber rwd_wid_100per" [class.media-1000-dataNumber]="!isPreviewMode">
                <div class="flexCol dataMargin" style="width: 50%;">
                  <span class="dataFont summaryData">{{trendData.bestFitTime | number:'1.0-0'}}</span>
                  <span class="dataAnnotation">
                    {{'universal_adjective_maxHight' | translate}} {{'universal_activityData_minutes' | translate}}
                  </span>
                </div>
                <div class="flexCol dataMargin" style="width: 50%;">
                  <span class="dataFont summaryData">{{trendData.avgFitTime | number:'1.0-1'}}</span>
                  <span class="dataAnnotation">
                    {{'universal_adjective_avg' | translate}} {{'universal_activityData_minutes' | translate}}
                  </span>
                </div>
              </div>
              <div class="dataChart" [class.media-1000-dataChart]="!isPreviewMode">
                <span class="noChartData" *ngIf="noFitTimeData">{{'universal_status_noData' | translate}}</span>
                <app-fillet-column-chart
                  [data]="fitTimeData"
                  [dateRange]="dataDateRange"
                  [chartName]="'FitTime'"
                  [searchDate]="searchDate"
                  *ngIf="!noFitTimeData"
                >
                </app-fillet-column-chart>
              </div>
            </div>
          </div>
        </div>
        <div *ngIf="isPreviewMode && !isLoading" class="printMark">
          GPTFit
        </div>
      </ng-container>
    </div>
  </section>
</div>